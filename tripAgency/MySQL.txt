CREIAMO DB:

CREATE DATABASE IF NOT EXISTS trip_agency;

--------PER USARLO :

    USE trip_agency

--------CREO TABELLE----

CREATE TABLE clienti (
    
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(30) NOT NULL,
    cognome VARCHAR(30) NOT NULL,
    telefono VARCHAR(30) NOT NULL,
    nazione VARCHAR(30) NOT NULL,
    codice_fiscale VARCHAR(16) NOT NULL,
    documento VARCHAR(30) NOT NULL

);


CREATE TABLE destinazioni (
    
    id INT AUTO_INCREMENT PRIMARY KEY,
    città VARCHAR(30) NOT NULL,
    paese VARCHAR(30) NOT NULL,
    prezzo DECIMAL(10,2) NOT NULL,    
    data_partenza DATE NOT NULL,
    data_ritorno DATE NOT NULL

);


CREATE TABLE prenotazioni (

    id INT AUTO_INCREMENT PRIMARY KEY,
    id_cliente INT NOT NULL,
    id_destinazione INT NOT NULL,

    data_prenotazione DATE NOT NULL,
    acconto DECIMAL(10,2),
    numero_persone INT NOT NULL,
    assicurazione BOOLEAN NOT NULL,

    CONSTRAINT fk_cliente FOREIGN KEY (id_cliente) -> QUesto vincolo impedisce l'inserimento di una prenotazione con una destinazione che non esiste 
    REFERENCES clienti(id)                         -> referenza con l ID della tabella clienti 
    ON DELETE CASCADE,                             -> cancella automaticamente le prenotazione se la destinazione viene eliminata

    CONSTRAINT fk_destinazione  FOREIGN KEY (id_destinazione)
    REFERENCES destinazioni(id)
    ON DELETE CASCADE

);


*** i CLIENTI e le DESTINAZIONI sono entità indipendenti

    le PRENOTAZIONI dipendono da entrambe tramite chiavi esterne (FK) foreign KEY

    i vincoli ON DELETE CASCADE fanno si che eliminando un cliente o una destinazione vengano cancellate automaticamente anche le prenotazioni collegate